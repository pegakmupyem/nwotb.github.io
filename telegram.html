<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Telegram userid check</title>
    <meta name="viewport" content="width=device-width" />
    <style>
        body {
            background-image: url("//nwotb.ml/icon.png");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 100% 100%;
            background-attachment: fixed;
            background-color: #00ff00;
            color: silver;
        }
    </style>
</head>
<body>
  <figure class='frame'>
    <figcaption></figcaption>
  </figure>
    <div> 
        <h1>1) –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º.</h1>
<script>
var tgphoto = localStorage.getItem('tgphoto.replace(/\"/g, "")');
alert('tgphoto' + tgphoto);
function check() {
          if (tgphoto == null) {
	      alert('tgphoto null' + tgphoto);
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = "https://nwotb.ml/icon.png";
              ilona.width = "240";
              frame.appendChild(ilona);
          } else {
	      alert('tgphoto done' + tgphoto)
              var tgphoto = localStorage.getItem('tgphoto.replace(/\"/g, "")');
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = tgphoto.replace(/\"/g, "");
              ilona.width = "240";
              frame.appendChild(ilona);
          };
check()
</script>
<script async src="https://telegram.org/js/telegram-widget.js?15" data-telegram-login="piper_pied_discuss_bot" data-size="small" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
var tgphoto = localStorage.getItem('tguserphoto.replace(/\"/g, "")');
alert(tgphoto);
          if (tgphoto == null) {
			  alert('4');
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = "https://nwotb.ml/icon.png";
              ilona.width = "240";
              frame.appendChild(ilona);
          } else {
			  alert('5')
              var tgphoto = localStorage.getItem('tgphoto.replace(/\"/g, "")');
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = tgphoto.replace(/\"/g, "");
              ilona.width = "240";
              frame.appendChild(ilona);
          };
  function onTelegramAuth(user) {
    localStorage.setItem('tguser', JSON.stringify(user.id));
    localStorage.setItem('tgusername', JSON.stringify(user.username));
    localStorage.setItem('tguserphoto', JSON.stringify(user.photo_url));
      if (user.photo_url == null) {
          if (tgphoto == null) {
	      alert('1');
	      localStorage.setItem('tguserphoto', JSON.stringify('https://nwotb.ml/icon.png'));
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = "https://nwotb.ml/icon.png";
              ilona.width = "240";
              frame.appendChild(ilona);
          } else {
	      alert('2');
              var tgphoto = localStorage.getItem('tgphoto.replace(/\"/g, "")');
              var frame = document.querySelector('.frame');
              var ilona = document.createElement("IMG");
              ilona.src = tgphoto.replace(/\"/g, "");
              ilona.width = "240";
              frame.appendChild(ilona);
          };
      } else {
          alert('3')
          var frame = document.querySelector('.frame');
          var ilona = document.createElement("IMG");
          ilona.src = user.photo_url;
          ilona.width = "240";
          frame.appendChild(ilona);
      };
    alert('–í—ã —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫: ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
    newurl = window.location.origin + '/telegram?' + user.first_name + '&' + user.last_name + '&' + user.username + '#' + user.id;
    window.location.href = newurl;
  }
onTelegramAuth(user)()
</script>

        <h2>2) –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–æ–π UDID!</h2>
        <div>
            <input type="button" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å USERID üì≤" onclick="Copy();" /></br> </br>
            –í–∞—à USERID: </br><textarea id="url" rows="3" cols="33"></textarea>
        </div>
    </div>
<script>
function Copy() {
  var hash = window.location.hash.slice(1);
  if (hash == "") {
  alert('–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º, –∞ –ø–æ—Ç–æ–º —É–∂–µ —Ç—ã–∫–∞–π—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É‚ÄºÔ∏è');
  } else {
  var Url = document.getElementById("url");
  Url.innerHTML = window.location.search + 'üì≤' + hash;
  console.log(Url.innerHTML)
  Url.select();
  text = Url.select();
  document.execCommand("copy");
  var Url = document.getElementById("url");
  Url.innerHTML = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ç–µ–ª–µ–≥—Ä–∞–º: üìü' + window.location.search + 'üì±' + hash;
  console.log(Url.innerHTML)
  setTimeout(() => alert('‚úÇÔ∏è Telegram account user.id —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω ' + text + ' –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ üì≤ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏!'), 1500);
  setTimeout(function(){ window.location="https://t.me/pegakmop"; },6666);
  };
}
</script>
</body>
</html>
